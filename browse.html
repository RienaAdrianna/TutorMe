<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> UQ TutorMatch - Browse UQ Tutors</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .tutor-card {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .tutor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #51247A, #8B5FBF);
        }
        
        .tutor-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 15px 30px rgba(124, 58, 237, 0.15);
        }
        
        .filter-panel {
            transition: all 0.3s ease;
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
        
        .dropdown {
            position: relative;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
            z-index: 1;
            border-radius: 12px;
            border: 1px solid #f3f4f6;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
        
        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
            transition: all 0.2s ease;
        }
        
        .dropdown-item:hover {
            background-color: #f5f3ff;
            color: #51247A;
        }
        
        .dropdown-item:last-child {
            border-bottom: none;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin: 2px;
        }
        
        .badge-purple {
            background-color: #f5f3ff;
            color: #51247A;
            border: 1px solid #ddd6fe;
        }
        
        .badge-blue {
            background-color: #e0e7ff;
            color: #4f46e5;
            border: 1px solid #c7d2fe;
        }
        
        .badge-green {
            background-color: #d1fae5;
            color: #059669;
            border: 1px solid #a7f3d0;
        }
        
        .search-input:focus {
            box-shadow: 0 0 0 3px rgba(167, 139, 250, 0.3);
        }
        
        .price-filter:checked {
            background-color: #51247A;
            border-color: #51247A;
        }
        
        .avatar-gradient {
            background: linear-gradient(135deg, #51247A, #8B5FBF);
        }
        
        .header-gradient {
            background: linear-gradient(90deg, #ffffff, #f5f3ff);
        }
        
        .star-rating {
            position: relative;
            display: inline-block;
        }
        
        .star-rating::before {
            content: "★★★★★";
            color: #e5e7eb;
        }
        
        .star-rating::after {
            content: "★★★★★";
            position: absolute;
            left: 0;
            top: 0;
            width: var(--rating-width);
            overflow: hidden;
            color: #f59e0b;
        }
        
        .smooth-transition {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Header -->
    <div class="header-gradient border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center mb-4">
                    <div class="w-10 h-10 rounded-lg flex items-center justify-center mr-3" style="background-color: #4B2E83;">
                        <i class="fas fa-graduation-cap text-white text-lg"></i>
                    </div>
                    <span class="font-bold text-sm tracking-wider" style="color: #4B2E83;"">UQ TutorMatch</span>
                </div>
                <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
                    Find Your Perfect Tutor
                </h1>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                    Connect with top-rated peer tutors across all University of Queensland faculties
                </p>
            </div>

            <!-- Search and Filters -->
            <div class="grid md:grid-cols-4 gap-4">
                <div class="md:col-span-2">
                    <div class="relative">
                        <i class="fas fa-search absolute left-4 top-4 text-gray-400"></i>
                        <input
                            id="searchInput"
                            type="text"
                            placeholder="Search by name, subject, or faculty..."
                            class="search-input w-full pl-12 pr-4 py-3 text-lg border border-gray-200 rounded-xl bg-white focus:outline-none focus:border-purple-500 smooth-transition"
                        />
                    </div>
                </div>
                
                <div class="dropdown">
                    <button class="w-full h-12 px-4 py-3 text-left border border-gray-200 rounded-xl bg-white flex items-center justify-between hover:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-100 smooth-transition">
                        <span id="facultySelected" class="text-gray-700">All Faculties</span>
                        <i class="fas fa-chevron-down text-gray-400 text-sm smooth-transition"></i>
                    </button>
                    <div class="dropdown-content">
                        <div class="dropdown-item" data-value="all">All Faculties</div>
                        <div class="dropdown-item" data-value="Engineering">Engineering</div>
                        <div class="dropdown-item" data-value="Business">Business</div>
                        <div class="dropdown-item" data-value="Medicine">Medicine</div>
                        <div class="dropdown-item" data-value="Science">Science</div>
                        <div class="dropdown-item" data-value="Arts">Arts</div>
                        <div class="dropdown-item" data-value="Law">Law</div>
                        <div class="dropdown-item" data-value="Education">Education</div>
                        <div class="dropdown-item" data-value="Agriculture">Agriculture</div>
                    </div>
                </div>

                <div class="dropdown">
                    <button class="w-full h-12 px-4 py-3 text-left border border-gray-200 rounded-xl bg-white flex items-center justify-between hover:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-100 smooth-transition">
                        <span id="sortSelected" class="text-gray-700">Highest Rated</span>
                        <i class="fas fa-chevron-down text-gray-400 text-sm smooth-transition"></i>
                    </button>
                    <div class="dropdown-content">
                        <div class="dropdown-item" data-value="rating">Highest Rated</div>
                        <div class="dropdown-item" data-value="price-low">Price: Low to High</div>
                        <div class="dropdown-item" data-value="price-high">Price: High to Low</div>
                        <div class="dropdown-item" data-value="experience">Most Experienced</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Sidebar Filters - Desktop -->
            <div class="hidden lg:block w-72 flex-shrink-0">
                <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-100 sticky top-8">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Filters</h3>
                        <button id="clearFiltersDesktop" class="text-sm text-purple-600 hover:text-purple-800 smooth-transition">
                            Clear all
                        </button>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-3">Location</label>
                        <div class="dropdown">
                            <button class="w-full px-4 py-3 text-left border border-gray-200 rounded-xl bg-white flex items-center justify-between hover:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-100 smooth-transition">
                                <span id="locationSelected" class="text-gray-700">All Locations</span>
                                <i class="fas fa-chevron-down text-gray-400 text-sm smooth-transition"></i>
                            </button>
                            <div class="dropdown-content">
                                <div class="dropdown-item" data-value="all">All Locations</div>
                                <div class="dropdown-item" data-value="St Lucia Campus">St Lucia Campus</div>
                                <div class="dropdown-item" data-value="Herston Campus">Herston Campus</div>
                                <div class="dropdown-item" data-value="Gatton Campus">Gatton Campus</div>
                                <div class="dropdown-item" data-value="Online">Online</div>
                                <div class="dropdown-item" data-value="Flexible">Flexible</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-3">Price Range</label>
                        <div class="space-y-3">
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" class="price-filter rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="0" data-max="30">
                                <span class="text-sm text-gray-700">$0 - $30/hr</span>
                            </label>
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" class="price-filter rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="30" data-max="50">
                                <span class="text-sm text-gray-700">$30 - $50/hr</span>
                            </label>
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" class="price-filter rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="50" data-max="100">
                                <span class="text-sm text-gray-700">$50+/hr</span>
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Rating</label>
                        <div class="space-y-3">
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="4.5">
                                <div class="flex items-center">
                                    <div class="star-rating" style="--rating-width: 100%"></div>
                                    <span class="text-xs text-gray-500 ml-1">4.5+</span>
                                </div>
                            </label>
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="4.0">
                                <div class="flex items-center">
                                    <div class="star-rating" style="--rating-width: 80%"></div>
                                    <span class="text-xs text-gray-500 ml-1">4.0+</span>
                                </div>
                            </label>
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="3.5">
                                <div class="flex items-center">
                                    <div class="star-rating" style="--rating-width: 70%"></div>
                                    <span class="text-xs text-gray-500 ml-1">3.5+</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="flex-1">
                <!-- Results header -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <p class="text-gray-600" id="resultsCount">
                            Loading tutors...
                        </p>
                    </div>
                    <button
                        id="mobileFiltersBtn"
                        class="lg:hidden border border-gray-200 px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-gray-50 smooth-transition"
                    >
                        <i class="fas fa-filter text-purple-600"></i>
                        <span class="text-gray-700">Filters</span>
                    </button>
                </div>

                <!-- Mobile Filters -->
                <div id="mobileFilters" class="lg:hidden mb-6 hidden">
                    <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Filters</h3>
                            <button id="clearFiltersMobile" class="text-sm text-purple-600 hover:text-purple-800 smooth-transition">
                                Clear all
                            </button>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Location</label>
                            <div class="dropdown">
                                <button class="w-full px-4 py-3 text-left border border-gray-200 rounded-xl bg-white flex items-center justify-between hover:border-purple-500 smooth-transition">
                                    <span id="mobileLocationSelected" class="text-gray-700">All Locations</span>
                                    <i class="fas fa-chevron-down text-gray-400 text-sm smooth-transition"></i>
                                </button>
                                <div class="dropdown-content">
                                    <div class="dropdown-item" data-value="all">All Locations</div>
                                    <div class="dropdown-item" data-value="St Lucia Campus">St Lucia Campus</div>
                                    <div class="dropdown-item" data-value="Herston Campus">Herston Campus</div>
                                    <div class="dropdown-item" data-value="Gatton Campus">Gatton Campus</div>
                                    <div class="dropdown-item" data-value="Online">Online</div>
                                    <div class="dropdown-item" data-value="Flexible">Flexible</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Price Range</label>
                            <div class="space-y-3">
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" class="price-filter rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="0" data-max="30">
                                    <span class="text-sm text-gray-700">$0 - $30/hr</span>
                                </label>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" class="price-filter rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="30" data-max="50">
                                    <span class="text-sm text-gray-700">$30 - $50/hr</span>
                                </label>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" class="price-filter rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="50" data-max="100">
                                    <span class="text-sm text-gray-700">$50+/hr</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Rating</label>
                            <div class="space-y-3">
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="4.5">
                                    <div class="flex items-center">
                                        <div class="star-rating" style="--rating-width: 100%"></div>
                                        <span class="text-xs text-gray-500 ml-1">4.5+</span>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500 smooth-transition" data-min="4.0">
                                    <div class="flex items-center">
                                        <div class="star-rating" style="--rating-width: 80%"></div>
                                        <span class="text-xs text-gray-500 ml-1">4.0+</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tutors Grid -->
                <div id="tutorsGrid" class="grid md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                    <!-- Loading skeleton -->
                    <div class="loading-skeleton">
                        <div class="bg-white rounded-xl p-6 animate-pulse">
                            <div class="w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"></div>
                            <div class="h-6 bg-gray-200 rounded mb-2"></div>
                            <div class="h-4 bg-gray-200 rounded mb-4 w-3/4 mx-auto"></div>
                            <div class="space-y-2">
                                <div class="h-4 bg-gray-200 rounded"></div>
                                <div class="h-4 bg-gray-200 rounded w-5/6"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- No results message -->
                <div id="noResults" class="text-center py-12 hidden">
                    <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-search text-4xl text-gray-400"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">No tutors found</h3>
                    <p class="text-gray-600 mb-4">Try adjusting your search criteria or filters</p>
                    <button
                        id="clearFiltersBtn"
                        class="border border-gray-200 px-6 py-2 rounded-lg hover:bg-gray-50 transition-colors text-purple-600 hover:text-purple-800 smooth-transition"
                    >
                        Clear All Filters
                    </button>
                </div>
                
                <!-- Pagination (placeholder) -->
                <div class="mt-12 flex justify-center hidden" id="pagination">
                    <nav class="flex items-center space-x-2">
                        <button class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-500 hover:bg-gray-50 smooth-transition">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="w-10 h-10 flex items-center justify-center rounded-lg border border-purple-600 bg-purple-600 text-white smooth-transition">
                            1
                        </button>
                        <button class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-700 hover:bg-gray-50 smooth-transition">
                            2
                        </button>
                        <button class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-700 hover:bg-gray-50 smooth-transition">
                            3
                        </button>
                        <span class="px-2 text-gray-500">...</span>
                        <button class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-700 hover:bg-gray-50 smooth-transition">
                            8
                        </button>
                        <button class="w-10 h-10 flex items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-500 hover:bg-gray-50 smooth-transition">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample tutor data
        const sampleTutors = [
            {
                id: 1,
                name: "Sarah Chen",
                faculty: "Science",
                subjects: ["MATH1071", "MATH1061", "STAT2003"],
                location: "St Lucia Campus",
                rating: 4.9,
                reviews: 150,
                hourly_rate: 45,
                experience_years: 3,
                bio: "Mathematics tutor specializing in calculus and statistics. Achieved HD in all math courses.",
                avatar: "SC"
            },
            {
                id: 2,
                name: "Marcus Johnson",
                faculty: "Engineering",
                subjects: ["CSSE2310", "COMP3506", "ELEC2004"],
                location: "St Lucia Campus",
                rating: 4.8,
                reviews: 120,
                hourly_rate: 50,
                experience_years: 4,
                bio: "Computer Science and Electrical Engineering expert. Former software engineer at Google.",
                avatar: "MJ"
            },
            {
                id: 3,
                name: "Emma Rodriguez",
                faculty: "Science",
                subjects: ["CHEM1100", "BIOL1020", "BIOC2000"],
                location: "St Lucia Campus",
                rating: 5.0,
                reviews: 180,
                hourly_rate: 40,
                experience_years: 2,
                bio: "Chemistry and Biology tutor with pre-med expertise. Passionate about making science accessible.",
                avatar: "ER"
            },
            {
                id: 4,
                name: "David Kim",
                faculty: "Business",
                subjects: ["ECON1010", "FINM1416", "MGTS1601"],
                location: "St Lucia Campus",
                rating: 4.7,
                reviews: 90,
                hourly_rate: 35,
                experience_years: 2,
                bio: "Business and Economics tutor with industry experience. Specializes in financial modeling.",
                avatar: "DK"
            },
            {
                id: 5,
                name: "Lisa Wang",
                faculty: "Medicine",
                subjects: ["ANAT2008", "PHYL2100", "PATH3202"],
                location: "Herston Campus",
                rating: 4.9,
                reviews: 200,
                hourly_rate: 60,
                experience_years: 5,
                bio: "Medical student specializing in anatomy and physiology. Helps students master complex concepts.",
                avatar: "LW"
            },
            {
                id: 6,
                name: "Alex Thompson",
                faculty: "Arts",
                subjects: ["PHIL1002", "ENGL1000", "HIST1201"],
                location: "Online",
                rating: 4.6,
                reviews: 75,
                hourly_rate: 30,
                experience_years: 1,
                bio: "Philosophy and English Literature tutor. Focuses on critical thinking and essay writing skills.",
                avatar: "AT"
            },
            {
                id: 7,
                name: "Priya Patel",
                faculty: "Engineering",
                subjects: ["ENGG1400", "MECH2300", "METR4200"],
                location: "St Lucia Campus",
                rating: 4.8,
                reviews: 95,
                hourly_rate: 55,
                experience_years: 3,
                bio: "Mechanical Engineering tutor with robotics specialization. Makes complex engineering concepts clear.",
                avatar: "PP"
            },
            {
                id: 8,
                name: "James Wilson",
                faculty: "Law",
                subjects: ["LAWS1100", "LAWS2111", "LAWS3103"],
                location: "St Lucia Campus",
                rating: 4.7,
                reviews: 110,
                hourly_rate: 65,
                experience_years: 4,
                bio: "Law tutor with experience in moot court competitions. Helps with case analysis and legal writing.",
                avatar: "JW"
            }
        ];

        // Global variables
        let allTutors = [...sampleTutors];
        let filteredTutors = [...sampleTutors];
        let currentFilters = {
            searchTerm: "",
            faculty: "all",
            location: "all",
            sortBy: "rating",
            minRating: 0,
            priceRange: []
        };

        // DOM elements
        const searchInput = document.getElementById('searchInput');
        const tutorsGrid = document.getElementById('tutorsGrid');
        const resultsCount = document.getElementById('resultsCount');
        const noResults = document.getElementById('noResults');
        const mobileFiltersBtn = document.getElementById('mobileFiltersBtn');
        const mobileFilters = document.getElementById('mobileFilters');
        const clearFiltersBtn = document.getElementById('clearFiltersBtn');
        const clearFiltersDesktop = document.getElementById('clearFiltersDesktop');
        const clearFiltersMobile = document.getElementById('clearFiltersMobile');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            renderTutors();
        });

        function setupEventListeners() {
            // Search input
            searchInput.addEventListener('input', (e) => {
                currentFilters.searchTerm = e.target.value;
                filterAndSortTutors();
            });

            // Dropdown handlers
            setupDropdowns();

            // Mobile filters toggle
            mobileFiltersBtn.addEventListener('click', () => {
                mobileFilters.classList.toggle('hidden');
            });

            // Clear filters
            clearFiltersBtn.addEventListener('click', clearAllFilters);
            clearFiltersDesktop.addEventListener('click', clearAllFilters);
            clearFiltersMobile.addEventListener('click', clearAllFilters);
            
            // Price filter checkboxes
            document.querySelectorAll('.price-filter').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const min = parseFloat(this.getAttribute('data-min'));
                    const max = parseFloat(this.getAttribute('data-max'));
                    
                    if (this.checked) {
                        currentFilters.priceRange.push({min, max});
                    } else {
                        currentFilters.priceRange = currentFilters.priceRange.filter(
                            range => range.min !== min || range.max !== max
                        );
                    }
                    
                    filterAndSortTutors();
                });
            });
            
            // Rating filter checkboxes
            document.querySelectorAll('[data-min]').forEach(checkbox => {
                if (!checkbox.classList.contains('price-filter')) {
                    checkbox.addEventListener('change', function() {
                        const minRating = parseFloat(this.getAttribute('data-min'));
                        
                        if (this.checked) {
                            currentFilters.minRating = minRating;
                        } else {
                            currentFilters.minRating = 0;
                        }
                        
                        filterAndSortTutors();
                    });
                }
            });
        }

        function setupDropdowns() {
            // Faculty dropdown
            const facultyItems = document.querySelectorAll('[data-value]');
            facultyItems.forEach(item => {
                item.addEventListener('click', function() {
                    const dropdown = this.closest('.dropdown');
                    const selectedSpan = dropdown.querySelector('span');
                    const value = this.getAttribute('data-value');
                    
                    selectedSpan.textContent = this.textContent;
                    
                    // Determine which dropdown this is
                    if (selectedSpan.id === 'facultySelected') {
                        currentFilters.faculty = value;
                    } else if (selectedSpan.id === 'sortSelected') {
                        currentFilters.sortBy = value;
                    } else if (selectedSpan.id === 'locationSelected' || selectedSpan.id === 'mobileLocationSelected') {
                        currentFilters.location = value;
                        // Update both desktop and mobile location selectors
                        document.getElementById('locationSelected').textContent = this.textContent;
                        document.getElementById('mobileLocationSelected').textContent = this.textContent;
                    }
                    
                    filterAndSortTutors();
                });
            });
        }

        function filterAndSortTutors() {
            let filtered = [...allTutors];

            // Search filter
            if (currentFilters.searchTerm) {
                const searchTerm = currentFilters.searchTerm.toLowerCase();
                filtered = filtered.filter(tutor => 
                    tutor.name.toLowerCase().includes(searchTerm) ||
                    tutor.subjects.some(subject => subject.toLowerCase().includes(searchTerm)) ||
                    tutor.faculty.toLowerCase().includes(searchTerm) ||
                    tutor.bio.toLowerCase().includes(searchTerm)
                );
            }

            // Faculty filter
            if (currentFilters.faculty !== "all") {
                filtered = filtered.filter(tutor => tutor.faculty === currentFilters.faculty);
            }

            // Location filter
            if (currentFilters.location !== "all") {
                filtered = filtered.filter(tutor => tutor.location === currentFilters.location);
            }
            
            // Rating filter
            if (currentFilters.minRating > 0) {
                filtered = filtered.filter(tutor => tutor.rating >= currentFilters.minRating);
            }
            
            // Price range filter
            if (currentFilters.priceRange.length > 0) {
                filtered = filtered.filter(tutor => {
                    return currentFilters.priceRange.some(range => 
                        tutor.hourly_rate >= range.min && 
                        (range.max === 100 ? true : tutor.hourly_rate <= range.max)
                    );
                });
            }

            // Sort
            filtered.sort((a, b) => {
                switch (currentFilters.sortBy) {
                    case "rating":
                        return b.rating - a.rating;
                    case "price-low":
                        return a.hourly_rate - b.hourly_rate;
                    case "price-high":
                        return b.hourly_rate - a.hourly_rate;
                    case "experience":
                        return b.experience_years - a.experience_years;
                    default:
                        return 0;
                }
            });

            filteredTutors = filtered;
            renderTutors();
        }

        function renderTutors() {
            if (filteredTutors.length === 0) {
                tutorsGrid.innerHTML = '';
                noResults.classList.remove('hidden');
                resultsCount.textContent = '0 tutors found';
                return;
            }

            noResults.classList.add('hidden');
            resultsCount.textContent = `${filteredTutors.length} ${filteredTutors.length === 1 ? 'tutor' : 'tutors'} found`;

            tutorsGrid.innerHTML = filteredTutors.map(tutor => `
                <div class="tutor-card bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 avatar-gradient rounded-full flex items-center justify-center mx-auto mb-3">
                            <span class="text-white font-bold text-xl">${tutor.avatar}</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">${tutor.name}</h3>
                        <p class="text-purple-600 font-medium">${tutor.faculty}</p>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex justify-center items-center gap-2 mb-2">
                            <div class="star-rating" style="--rating-width: ${(tutor.rating / 5) * 100}%"></div>
                            <span class="text-gray-600 text-sm">${tutor.rating} (${tutor.reviews}+)</span>
                        </div>
                        
                        <div class="flex justify-center items-center gap-4 text-sm text-gray-600 mb-3">
                            <div class="flex items-center gap-1">
                                <i class="fas fa-dollar-sign text-xs text-purple-500"></i>
                                <span>${tutor.hourly_rate}/hr</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <i class="fas fa-briefcase text-xs text-purple-500"></i>
                                <span>${tutor.experience_years} yrs</span>
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap justify-center gap-1 mb-4">
                            ${tutor.subjects.slice(0, 3).map(subject => `
                                <span class="badge badge-purple">${subject}</span>
                            `).join('')}
                            ${tutor.subjects.length > 3 ? `<span class="badge badge-purple">+${tutor.subjects.length - 3}</span>` : ''}
                        </div>
                        
                        <p class="text-gray-600 text-sm text-center mb-4">${tutor.bio}</p>
                    </div>
                    
                    <div class="text-center">
                        <button class="w-full bg-gradient-to-r from-purple-600 to-purple-500 text-white py-2 px-4 rounded-lg hover:from-purple-700 hover:to-purple-600 transition-all font-medium shadow-sm hover:shadow-md smooth-transition">
                            View Profile
                        </button>
                    </div>
                </div>
            `).join('');
            
            // Show pagination if more than 6 tutors
            if (filteredTutors.length > 6) {
                document.getElementById('pagination').classList.remove('hidden');
            } else {
                document.getElementById('pagination').classList.add('hidden');
            }
        }

        function clearAllFilters() {
            currentFilters = {
                searchTerm: "",
                faculty: "all",
                location: "all",
                sortBy: "rating",
                minRating: 0,
                priceRange: []
            };
            
            // Reset UI elements
            searchInput.value = "";
            document.getElementById('facultySelected').textContent = "All Faculties";
            document.getElementById('locationSelected').textContent = "All Locations";
            document.getElementById('mobileLocationSelected').textContent = "All Locations";
            document.getElementById('sortSelected').textContent = "Highest Rated";
            
            // Uncheck all checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // Close mobile filters if open
            mobileFilters.classList.add('hidden');
            
            filterAndSortTutors();
        }

        // Simulate loading delay
        setTimeout(() => {
            document.querySelectorAll('.loading-skeleton').forEach(el => el.remove());
            renderTutors();
        }, 1000);
    </script>
</body>
</html>